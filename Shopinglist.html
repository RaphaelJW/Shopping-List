<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Shoppinglist</title>
</head>
<body>
    <h3> My Shoppinglist </h3>
    <input type="text" id="NewItem" placeholder="Add new item">

    <button onclick="AddNewItem()" id="AddBtn">Add item</button>
    <button onclick="localStorage.removeItem('storedlist'); Shoppinglist = []; ShoppinglistElement.innerHTML = ''">Clear items</button>
    <ul id = "list"></ul>


    <script>
        var storeddata = localStorage.getItem("storedlist")
        if (storeddata){
            var Shoppinglist = JSON.parse(storeddata)
        }
        else{
            Shoppinglist = []
        }

        var ShoppinglistElement = document.getElementById("list");
            ShoppinglistElement.innerHTML = "";
            Shoppinglist.forEach(element => {
                var node = document.createElement("li");
                node.innerHTML = element;
                ShoppinglistElement.appendChild(node);
            });

        //Submit when pressing 'Enter'
        var input = document.getElementById("NewItem");
        input.addEventListener("keyup", function(event){
            if (event.keyCode === 13){
                event.preventDefault();
                document.getElementById("AddBtn").click();
            }
        })
        
        //Adding a new item to the shoppinglist
        function AddNewItem(){
            var NewItem = document.getElementById("NewItem").value;
            Shoppinglist.push(NewItem);
            console.log(Shoppinglist);
            var Shoppinglistlength = Shoppinglist.lenth;
            var ShoppinglistElement = document.getElementById("list");
            ShoppinglistElement.innerHTML = "";
            Shoppinglist.forEach(element => {
                var node = document.createElement("li");
                node.innerHTML = element;
                ShoppinglistElement.appendChild(node);
            });
            document.getElementById("NewItem").value = '';
            
            var ListString = JSON.stringify(Shoppinglist)
            localStorage.setItem("storedlist", ListString)
        }
    </script>
</body>
</html>